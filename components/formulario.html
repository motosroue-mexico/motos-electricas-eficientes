<aside>
    <p class="CBlanco">
        Solicita tu cotización
    </p>
    <h2 class="CBlanco">
        PARA SER DISTRIBUIDOR EXCLUSIVO
    </h2>
</aside>
<div id="mc_embed_shell">
      <link href="//cdn-images.mailchimp.com/embedcode/classic-061523.css" rel="stylesheet" type="text/css">
  <style type="text/css">
        #mc_embed_signup{background:#fff;clear:left; font:14px Helvetica,Arial,sans-serif; width: px;}
        /* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
           We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
    <form action="https://deyac.us14.list-manage.com/subscribe/post?u=9534a6efd315bd626253692ec&id=02f9c801cb&f_id=003c8de0f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_self" novalidate="">
        <div id="mc_embed_signup_scroll"><h2>Formulario de Registro</h2>
            <div class="indicates-required"><span class="asterisk">*</span> indica que es obligatorio</div>
            <div class="mc-field-group"><label for="mce-FNAME">Nombre y Apellido <span class="asterisk">*</span></label><input type="text" name="FNAME" class="required text" id="mce-FNAME" required="" value=""></div><div class="mc-field-group"><label for="mce-EMAIL">Dirección de correo electrónico <span class="asterisk">*</span></label><input type="email" name="EMAIL" class="required email" id="mce-EMAIL" required="" value=""></div><div class="mc-field-group"><label for="mce-PHONE">Número de teléfono <span class="asterisk">*</span></label><input type="text" name="PHONE" class="REQ_CSS" id="mce-PHONE" value=""></div><div class="mc-field-group"><label for="mce-EMPRESA">Nombre de la empresa <span class="asterisk">*</span></label><input type="text" name="EMPRESA" class="required text" id="mce-EMPRESA" required="" value=""></div><div class="mc-field-group"><label for="mce-DIRECCION">Dirección <span class="asterisk">*</span></label><input type="text" name="DIRECCION" class="required text" id="mce-DIRECCION" required="" value=""></div><div class="mc-field-group"><label for="mce-CIUDAD">Ciudad <span class="asterisk">*</span></label><input type="text" name="CIUDAD" class="required text" id="mce-CIUDAD" required="" value=""></div>
<div class="mc-field-group"><label for="mce-PAIS">País <span class="asterisk">*</span></label><select name="PAIS" class="required" id="mce-PAIS"><option value=""></option><option value="Colombia">Colombia</option><option value="Argentina">Argentina</option><option value="Chile">Chile</option><option value="Perú">Perú</option><option value="Ecuador">Ecuador</option><option value="Uruguay">Uruguay</option><option value="Panamá">Panamá</option><option value="Costa Rica">Costa Rica</option><option value="República Dominicana">República Dominicana</option><option value="Bolivia">Bolivia</option></select></div>
<div class="mc-field-group"><label for="mce-INTERESADO">Interesado en <span class="asterisk">*</span></label><select name="INTERESADO" class="required" id="mce-INTERESADO"><option value=""></option><option value="Ser distribuidor">Ser distribuidor</option><option value="Informes de un producto en particular">Informes de un producto en particular</option><option value="Ser proveedor">Ser proveedor</option></select></div>
          <div class="mensaje mc-field-group"><label for="mce-MENSAJE">Mensaje <span class="asterisk">*</span></label>
            <textarea type="text" name="MENSAJE" class="required text" id="mce-MENSAJE" required="" value=""></textarea>
          </div>
<div hidden=""><input type="hidden" name="tags" value="8101898"></div>
        <div id="mce-responses" class="clear">
            <div class="response" id="mce-error-response" style="display: none;"></div>
            <div class="response" id="mce-success-response" style="display: none;"></div>
        </div><div aria-hidden="true" style="position: absolute; left: -5000px;"><input type="text" name="b_9534a6efd315bd626253692ec_02f9c801cb" tabindex="-1" value=""></div><div class="clear">
<input type="submit" name="subscribe" id="mc-embedded-subscribe" class="button g-recaptcha" value="ENVIAR"  data-sitekey="6Lf6IYsqAAAAAJhaDoHJjVmT7EBejRMo8XHP0ja3" 
        data-callback='onSubmit'
        data-action='submit'>
          </div>
    </div>
</form>
</div>
</div>
<script>
    // Función que se llama cuando el reCAPTCHA se completa
    function onSubmit(token) {
        handleSubmitForm(token);
    }
    // Manejar el envío del formulario
    function handleSubmitForm(token) {
        const form = document.getElementById('mc-embedded-subscribe-form');
        const event = window.event || event; // Para evitar errores en navegadores antiguos
        event.preventDefault();
        // Obtener los valores de los campos del formulario
        const name = document.getElementById('mce-FNAME').value.trim();
        const email = document.getElementById('mce-EMAIL').value.trim();
        const phone = document.getElementById('mce-PHONE').value.trim();
        const empresa = document.getElementById('mce-EMPRESA').value.trim();
        const direccion = document.getElementById('mce-DIRECCION').value.trim();
        const ciudad = document.getElementById('mce-CIUDAD').value.trim();
        const pais = document.getElementById('mce-PAIS').value.trim();
        const interesado = document.getElementById('mce-INTERESADO').value.trim();
        const mensaje = document.getElementById('mce-MENSAJE').value.trim();
        // Validar que todos los campos requeridos tengan información
        if (!name || !email || !phone || !empresa || !direccion || !ciudad || !pais || !interesado || !mensaje) {
            console.error('Por favor completa todos los campos requeridos.');
            alert('Por favor, completa todos los campos antes de enviar el formulario.');
            return; // Detener el envío si falta información
        }
        // URL de Google Apps Script
        const googleSheetsUrl = 'https://script.google.com/macros/s/AKfycbwj7UY5kvQmFH8IQUGWdzdCOoSgKm6YFIFxxFdUO9BINyLvJs8e-uXa2Xkwu0kpsSU/exec';
        // Enviar los datos a Google Sheets
        fetch(googleSheetsUrl, {
            method: 'POST',
            body: new URLSearchParams({
                name: name,
                email: email,
                phone: phone,
                empresa: empresa,
                direccion: direccion,
                ciudad: ciudad,
                pais: pais,
                interesado: interesado,
                mensaje: mensaje,
            }),
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
        })
            .then((response) => {
                if (!response.ok) {
                    console.error('Error al enviar a Google Sheets:', response.statusText);
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.text();
            })
            .then((data) => {
                console.log('Respuesta de Google Sheets:', data);
                // Enviar formulario a Mailchimp después de confirmar que Google Sheets recibió los datos
                fetch(form.action, {
                    method: 'POST',
                    body: new FormData(form),
                    mode: 'no-cors',
                })
                    .then(() => {
                        // Redirigir a la página de agradecimiento con HTTPS
                        window.location.href = 'https://www.deyacradiadores.com/thank-you-contenedores';
                    })
                    .catch((error) => {
                        console.error('Error al enviar a Mailchimp:', error);
                        alert('Hubo un problema al enviar tu suscripción. Por favor, inténtalo de nuevo.');
                    });
            })
            .catch((error) => {
                console.error('Error en la solicitud a Google Sheets:', error);
                alert('Hubo un problema al enviar tus datos. Por favor, inténtalo de nuevo.');
            });
    }
    // Manejar el envío del formulario con reCAPTCHA
    document.getElementById('mc-embedded-subscribe-form').addEventListener('submit', function (event) {
        event.preventDefault();
        grecaptcha.ready(function () {
            grecaptcha.execute('6Lf6IYsqAAAAAJhaDoHJjVmT7EBejRMo8XHP0ja3', { action: 'submit' })
                .then(function (token) {
                    handleSubmitForm(token);
                })
                .catch((error) => {
                    console.error('Error al ejecutar reCAPTCHA:', error);
                    alert('No se pudo verificar reCAPTCHA. Por favor, inténtalo de nuevo.');
                });
        });
    });
</script>